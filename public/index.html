<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DIGEF</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }

        /* Loading Screen */
        #loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: #282c34;
            color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index: 9999;
        }

        /* Spinner Animation */
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #61dafb;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        /* Wizard  */

        .navbar {
            margin-bottom: 20px;
        }

        .wizard {
            max-width: 900px;
            margin: 20px auto;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .step {
            display: none;
        }

        .step.active {
            display: block;
        }

        .progress-bar {
            height: 6px;
            background-color: hsl(0, 0%, 83%);
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-bar-fill {
            height: 100%;
            width: 0;
            background-color: #6c63ff;
            transition: width 0.4s ease;
        }

        #finalForm {
            display: none;
            text-align: center;
            margin-top: 20px;
        }

        .success-container {
            background-color: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 400px;
            margin: auto;
        }

        .success-icon {
            color: #4CAF50;
            font-size: 50px;
            margin-bottom: 15px;
        }

        .success-message {
            font-size: 36px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .success-text {
            font-size: 16px;
            margin-bottom: 20px;
            color: #555;
        }

        .success-button {
            padding: 10px 20px;
            background-color: #4285f4;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            text-decoration: none;
            font-size: 16px;
        }

        .success-button:hover {
            background-color: #357ae8;
        }

        .navbar-text h4 {
            color: black;
        }

        .icon {
            font-size: 50px;
            color: green;
        }

        /* Upload  */

        .upload-container {
            border: 1px dashed #d1d5db;
            padding: 20px;
            text-align: center;
            border-radius: 10px;
            margin: 20px auto;
            max-width: 500px;
            background-color: #f8f9fa;
        }

        .drag-area {
            border: 2px dashed #6c757d;
            padding: 30px;
            border-radius: 5px;
            color: #6c757d;
            margin: 10px 0;
            background-color: #e9ecef;
            cursor: pointer;
        }

        .drag-area:hover {
            background-color: #f1f3f5;
        }

        .progress-upload {
            height: 20px;
            margin-top: 10px;
        }

        .progress-bar-upload {
            background-color: #cad2dd;
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 20px;
        }


        .thumbnail {
            max-width: 150px;
            margin-top: 10px;
        }

        .file-icon {
            font-size: 48px;
            color: #d9534f;
        }

        .download-link {
            margin-top: 10px;
            display: block;
        }

        .question-container {
            margin: 15px 0;
        }

        /* Add Form */

        /* .form-card-cancha {
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 15px;
            background-color: #f8f9fa;
            padding: 15px;
        } */

        .form-section {
            margin-bottom: 15px;
        }

        .combo-group {
            display: flex;
            justify-content: space-around;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
            <a class="navbar-brand" href="#">
                <img src="static/logo.png" height="60" alt="Logo" class="d-inline-block align-top">
            </a>
            <div class="mx-auto text-center">
                <span class="navbar-text h4">Dirección General de Educación Física Orientación Metodologíca
                    (DIGEF)</span>
            </div>
        </div>
    </nav>

    <div id="loading">
        <div class="spinner"></div>
        <p>Cargando...</p>
    </div>

    <div class="container-fluid" id="content" style="display: none;">
        <div class="wizard mx-auto col-12 col-md-10 col-lg-8" id="wizardContainer">
            <form id="wizardForm" enctype="multipart/form-data">
                <input type="hidden" id="uuid" name="uuid">
                <div class="progress-bar">
                    <div class="progress-bar-fill" id="progressFill"></div>
                </div>

                <!-- Step containers -->
                <div class="step active" id="step1">
                    <h3 class="mb-4">Paso 1: Información del Director</h3>
                    <hr>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="step1_nombreDirector">Nombre del Director:</label>
                            <input type="text" id="step1_nombreDirector" name="step1_nombreDirector"
                                class="form-control" placeholder="Juan Pérez" value="Juan Pérez">
                        </div>
                        <div class="col-md-6">
                            <label for="step1_direccionDirector">Dirección del Director:</label>
                            <input type="text" id="step1_direccionDirector" name="step1_direccionDirector"
                                class="form-control" placeholder="Calle 123, Ciudad" value="Calle 123, Ciudad">
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="step1_departamento">Departamento:</label>
                            <select id="step1_departamento" name="step1_departamento" class="form-control">
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="step1_municipio">Municipio:</label>
                            <select id="step1_municipio" name="step1_municipio" class="form-control">
                            </select>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="step1_telefono">Teléfono:</label>
                            <input type="text" id="step1_telefono" name="step1_telefono" class="form-control"
                                placeholder="+502 1234 5678" value="+502 1234 5678">
                        </div>
                        <div class="col-md-6">
                            <label for="step1_correoElectronico">Correo Electrónico:</label>
                            <input type="email" id="step1_correoElectronico" name="step1_correoElectronico"
                                class="form-control" placeholder="director@ejemplo.com" value="director@ejemplo.com">
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label>Fecha de Nacimiento:</label>
                            <input type="date" name="step1_fechaNacimiento" class="form-control" value="1990-01-01">
                        </div>
                        <div class="col-md-6">
                            <label>Género:</label>
                            <select name="step1_genero" class="form-control">
                                <option value="Masculino">Masculino</option>
                                <option value="Femenino">Femenino</option>
                                <option value="Otro">Otro</option>
                            </select>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label>Título Académico:</label>
                            <input type="text" name="step1_titulo_academico" class="form-control"
                                placeholder="Administracion de Empresas" value="Administracion de Empresas">
                        </div>
                        <div class="col-md-6">
                            <label>Nivel Académico:</label>
                            <select name="step1_nivelAcademico" class="form-control">
                                <option value="1">Diversificado</option>
                                <option value="2">Profesorado</option>
                                <option value="3">Licenciatura</option>
                                <option value="4">Diplomado</option>
                                <option value="5">Especialización</option>
                                <option value="6">Maestría </option>
                                <option value="7">Doctorado </option>
                            </select>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label>Renglón Presupuestario:</label>
                            <select name="step1_renglonPresupuestario" class="form-control">
                                <option value="011">011: Personal permanente</option>
                                <option value="021">021: Personal por contrato</option>
                                <option value="022">022: Servicios técnicos y profesionales</option>
                                <option value="029">029: Otras actividades</option>
                                <option value="181">181: Servicios técnicos y profesionales</option>
                                <option value="081">081: Personal administrativo, técnico, profesional y operativo
                                </option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label>Escalafón:</label>
                            <select name="step1_escalafon" class="form-control">
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                                <option value="E">E</option>
                                <option value="F">F</option>
                            </select>
                        </div>
                    </div>
                    <button type="button" onclick="obtenerDatosDirector()" class="btn btn-primary">Obtener
                        Datos</button>
                    <hr>
                </div>

                <div class="step" id="step2">
                    <h3 class="mb-4">Paso 2: Información del Establecimiento</h3>
                    <hr>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="step2_name" class="form-label">Nombre del Establecimiento</label>
                            <input type="text" class="form-control" id="step2_name" placeholder="Ingrese el nombre"
                                value="Escuela Central">
                        </div>
                        <div class="col-md-6">
                            <label for="step2_address" class="form-label">Dirección</label>
                            <input type="text" class="form-control" id="step2_address"
                                placeholder="Ingrese la dirección" value="Av. Principal 123">
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="step2_departamento">Departamento:</label>
                            <select id="step2_departamento" name="step2_departamento" class="form-control">
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="step2_municipio">Municipio:</label>
                            <select id="step2_municipio" name="step2_municipio" class="form-control">
                            </select>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="step2_phone" class="form-label">Teléfono</label>
                            <input type="text" class="form-control" id="step2_phone" placeholder="Ingrese el número"
                                value="555-1234">
                        </div>
                        <div class="col-md-6">
                            <label for="step2_email" class="form-label">Correo Electrónico</label>
                            <input type="email" class="form-control" id="step2_email" placeholder="ejemplo@dominio.com"
                                value="info@escuela.com">
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="step2_school_level" class="form-label">Nivel Escolar</label>
                            <select class="form-control" id="step2_school_level">
                                <option>Preprimaria</option>
                                <option>Primaria</option>
                                <option>Básico</option>
                                <option>Diversificado</option>
                                <option>Inicial</option>
                                <option>Primaria de adultos</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="step2_code" class="form-label">Código del Establecimiento</label>
                            <input type="text" class="form-control" id="step2_code" placeholder="Ingrese el código"
                                value="16-14-0102-40">
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="step2_shift" class="form-label">Jornada</label>
                            <select class="form-control" id="step2_shift">
                                <option>Jornada Matutina</option>
                                <option>Jornada Vespertina</option>
                                <option>Jornada Nocturna</option>
                                <option>Jornada Doble</option>
                                <option>Jornada Intermedia</option>
                                <option>Jornada Nocturna y sin jornada</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="step2_sector" class="form-label">Sector</label>
                            <select class="form-control" id="step2_sector">
                                <option>Sector Oficial (Público)</option>
                                <option>Sector Privado</option>
                                <option>Sector por Cooperativa</option>
                                <option>Sector Municipal</option>
                            </select>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="step2_female_students" class="form-label">Alumnos Femenino</label>
                            <input type="number" class="form-control" id="step2_female_students" placeholder="Cantidad"
                                value="100">
                        </div>
                        <div class="col-md-6">
                            <label for="step2_male_students" class="form-label">Alumnos Masculino</label>
                            <input type="number" class="form-control" id="step2_male_students" placeholder="Cantidad"
                                value="120">
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="step2_grades" class="form-label">Grados</label>
                            <input type="text" class="form-control" id="step2_grades" placeholder="Ingrese los grados"
                                value="1, 2, 3">
                        </div>
                        <div class="col-md-6">
                            <label for="step2_periods" class="form-label">Períodos</label>
                            <input type="text" class="form-control" id="step2_periods"
                                placeholder="Ingrese los períodos" value="2025-1">
                        </div>
                    </div>
                    <br>
                    <div class="row mb-3">
                        <div class="col-md-12">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="step2_certification">
                                <label class="form-check-label" for="step2_certification">
                                    ¿Cuenta con certificación extendida por el Registro General de la Propiedad donde el
                                    terreno del establecimiento educativo está registrado en Bienes del Estado y
                                    Adscrito al
                                    Ministerio de Educación?
                                </label>
                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="row mb-3">
                        <div class="col-md-12">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="step2_physical_education">
                                <label class="form-check-label" for="step2_physical_education">
                                    ¿Cuenta con maestro de educación física?
                                </label>
                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="step2_assigned_funds" class="form-label">Partidas Asignadas</label>
                            <input type="text" class="form-control" id="step2_assigned_funds"
                                placeholder="Ingreselas partidas" value="10">
                        </div>
                        <div class="col-md-6">
                            <label for="step2_students_registered" class="form-label">Inscritos</label>
                            <input type="text" class="form-control" id="step2_students_registered"
                                placeholder="Ingrese la cantidad" value="200">
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="getStep2Values()">Mostrar Datos</button>
                    <hr>
                </div>

                <div class="step" id="step3">
                    <h3 class="mb-4">Paso 3: Instalaciones Deportivas</h3>
                    <hr>
                    <div class="mb-3">
                        <label class="form-label">¿El establecimiento cuenta con terreno suficiente para construir una
                            cancha deportiva?</label>
                        <div class="d-flex gap-2">
                            <div class="form-check">
                                <input type="radio" class="form-check-input" name="step3_terreno" value="yes"
                                    id="step3_terrenoYes">
                                <label class="form-check-label" for="step3_terrenoYes">Sí</label>
                            </div>
                            <div class="form-check">
                                <input type="radio" class="form-check-input" name="step3_terreno" value="no"
                                    id="step3_terrenoNo">
                                <label class="form-check-label" for="step3_terrenoNo">No</label>
                            </div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">¿Cuáles son las medidas de este terreno? (Metros)</label>
                        <div class="row g-2">
                            <div class="col-6 col-md-3">
                                <label for="step3_length" class="form-label">Largo</label>
                                <input type="number" class="form-control" placeholder="Largo" aria-label="Largo"
                                    id="step3_length">
                            </div>
                            <div class="col-6 col-md-3">
                                <label for="step3_width" class="form-label">Ancho</label>
                                <input type="number" class="form-control" placeholder="Ancho" aria-label="Ancho"
                                    id="step3_width">
                            </div>
                        </div>
                    </div>

                    <div class="d-flex justify-content-end mt-3">
                        <button class="btn btn-sm btn-primary rounded-pill" onclick="addCanchaForm(event)"><i
                                class="fa fa-plus-circle"></i> Agregar nueva cancha</button>
                    </div>
                    <div id="forms-list"></div>
                    <button type="button" class="btn btn-success" onclick="showStep3Data()">Mostrar Datos</button>
                    <hr>
                </div>

                <div class="step" id="step4">
                    <h3 class="mb-4">Paso 4: Campo de Fútbol</h3>
                    <hr>
                    <div class="d-flex justify-content-end mt-3">
                        <button class="btn btn-sm btn-primary rounded-pill" onclick="addFootballFieldForm(event)"><i
                                class="fa fa-plus-circle"></i> Nuevo campo</button>
                    </div>
                    <div id="footballFieldsList"></div>
                    <button type="button" onclick="getFootballFieldData()" class="btn btn-primary">Obtener
                        Datos</button>
                    <hr>
                </div>

                <div class="step" id="step5">
                    <h3 class="mb-4">Paso 5: Otras Áreas Deportivas</h3>
                    <hr>

                    <table class="table table-striped table-sm">
                        <thead>
                            <tr>
                                <th>Descripción</th>
                                <th>Sí/No</th>
                                <th>Estado Actual</th>
                                <th>Largo (m)</th>
                                <th>Ancho (m)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Piscina</td>
                                <td><select class="form-select form-select-sm otras-areas-select"
                                        onchange="toggleFields(this)">
                                        <option>Si</option>
                                        <option>No</option>
                                    </select></td>
                                <td><select class="form-select form-select-sm otras-areas-condition">
                                        <option>B</option>
                                        <option>R</option>
                                        <option>M</option>
                                    </select></td>
                                <td><input type="number" class="form-control form-control-sm otras-areas-length"
                                        placeholder="0"></td>
                                <td><input type="number" class="form-control form-control-sm otras-areas-width"
                                        placeholder="0">
                                </td>
                            </tr>
                            <tr>
                                <td>Gimnasio de atletismo</td>
                                <td><select class="form-select form-select-sm otras-areas-select"
                                        onchange="toggleFields(this)">
                                        <option>Si</option>
                                        <option>No</option>
                                    </select></td>
                                <td><select class="form-select form-select-sm otras-areas-condition">
                                        <option>B</option>
                                        <option>R</option>
                                        <option>M</option>
                                    </select></td>
                                <td><input type="number" class="form-control form-control-sm otras-areas-length"
                                        placeholder="0"></td>
                                <td><input type="number" class="form-control form-control-sm otras-areas-width"
                                        placeholder="0">
                                </td>
                            </tr>
                            <tr>
                                <td>Gimnasio</td>
                                <td><select class="form-select form-select-sm otras-areas-select"
                                        onchange="toggleFields(this)">
                                        <option>Si</option>
                                        <option>No</option>
                                    </select></td>
                                <td><select class="form-select form-select-sm otras-areas-condition">
                                        <option>B</option>
                                        <option>R</option>
                                        <option>M</option>
                                    </select></td>
                                <td><input type="number" class="form-control form-control-sm otras-areas-length"
                                        placeholder="0"></td>
                                <td><input type="number" class="form-control form-control-sm otras-areas-width"
                                        placeholder="0">
                                </td>
                            </tr>
                            <tr>
                                <td>Juegos infantiles</td>
                                <td><select class="form-select form-select-sm otras-areas-select"
                                        onchange="toggleFields(this)">
                                        <option>Si</option>
                                        <option>No</option>
                                    </select></td>
                                <td><select class="form-select form-select-sm otras-areas-condition">
                                        <option>B</option>
                                        <option>R</option>
                                        <option>M</option>
                                    </select></td>
                                <td><input type="number" class="form-control form-control-sm otras-areas-length"
                                        placeholder="0"></td>
                                <td><input type="number" class="form-control form-control-sm otras-areas-width"
                                        placeholder="0">
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <button type="button" onclick="obtenerDatos()" class="btn btn-primary">Obtener Datos</button>
                    <hr>
                </div>

                <div class="step" id="step6">
                    <h3 class="mb-4">Paso 6: Información del Docente de Educación Física</h3>
                    <hr>

                    <div id="formDirector">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="step6_name" class="form-label">Nombre del director:</label>
                                <input type="text" class="form-control" id="step6_name" name="step6_name"
                                    placeholder="Juan Pérez">
                            </div>
                            <div class="col-md-6">
                                <label for="step6_address" class="form-label">Dirección del director:</label>
                                <input type="text" class="form-control" id="step6_address" name="step6_address"
                                    placeholder="Calle 10, Zona 1">
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="step6_department" class="form-label">Departamento:</label>
                                <select class="form-select" id="step6_department" name="step6_department">
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="step6_municipality" class="form-label">Municipio:</label>
                                <select class="form-select" id="step6_municipality" name="step6_municipality">
                                </select>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="step6_phone" class="form-label">Teléfono Personal:</label>
                                <input type="text" class="form-control" id="step6_phone" name="step6_phone"
                                    placeholder="5555-1234">
                            </div>
                            <div class="col-md-6">
                                <label for="step6_email" class="form-label">Correo Personal:</label>
                                <input type="email" class="form-control" id="step6_email" name="step6_email"
                                    placeholder="director@colegio.edu.gt">
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="step6_birthdate" class="form-label">Fecha de nacimiento:</label>
                                <input type="date" class="form-control" id="step6_birthdate" name="step6_birthdate">
                            </div>
                            <div class="col-md-6">
                                <label for="step6_dpi" class="form-label">DPI:</label>
                                <input type="text" class="form-control" id="step6_dpi" name="step6_dpi"
                                    placeholder="1234 56789 0101">
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="step6_gender" class="form-label">Género:</label>
                                <select class="form-select" id="step6_gender" name="step6_gender">
                                    <option value="">Seleccionar...</option>
                                    <option value="M">Masculino</option>
                                    <option value="F">Femenino</option>
                                    <option value="N">No especificar</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="step6_title" class="form-label">Título Académico:</label>
                                <input type="text" class="form-control" id="step6_title" name="step6_title"
                                    placeholder="Licenciado en Educación Física">
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="step6_academic_level" class="form-label">Nivel Académico:</label>
                                <select class="form-select" id="step6_academic_level" name="step6_academic_level">
                                    <option value="">Seleccionar...</option>
                                    <option value="DIV">Diversificado</option>
                                    <option value="PROF">Profesorado</option>
                                    <option value="LIC">Licenciatura</option>
                                    <option value="DIP">Diplomado</option>
                                    <option value="ESP">Especialización</option>
                                    <option value="MAE">Maestría</option>
                                    <option value="DOC">Doctorado</option>
                                </select>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="step6_budget" class="form-label">Renglón Presupuestario:</label>
                                <select class="form-select" id="step6_budget" name="step6_budget">
                                    <option value="">Seleccionar...</option>
                                    <option value="011">011: Personal permanente</option>
                                    <option value="021">021: Personal por contrato</option>
                                    <option value="022">022: Servicios técnicos y profesionales</option>
                                    <option value="029">029: Otras actividades</option>
                                    <option value="181">181: Servicios técnicos y profesionales</option>
                                    <option value="081">081: Personal administrativo, técnico, profesional y operativo
                                    </option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="step6_scale" class="form-label">Escalafón:</label>
                                <select class="form-select" id="step6_scale" name="step6_scale">
                                    <option value="">Seleccionar...</option>
                                    <option value="A">A</option>
                                    <option value="B">B</option>
                                    <option value="C">C</option>
                                    <option value="D">D</option>
                                    <option value="E">E</option>
                                    <option value="F">F</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <button type="button" class="btn btn-primary" onclick="getDirectorData()">Mostrar Datos</button>
                    <hr>
                </div>

                <div class="step" id="step7">
                    <h3>Paso 7: Confirmación de Datos</h3>
                    <hr>
                    <div class="upload-container">
                        <button id="sendButton" class="btn btn-secondary mb-3">Descargar Formato</button>

                        <div class="drag-area" id="dragArea">
                            Arrastra y suelta el archivo PDF firmado o haz clic para seleccionarlo.
                        </div>
                        <input type="file" class="form-control" id="fileInput" accept=".pdf" style="display: none;">
                        <div id="filePreview" class="mt-3"></div>
                        <button type="button" id="btnUpload" class="btn btn-primary mb-3">Subir PDF Firmado</button>
                        <div class="progress-upload mt-3" id="progressBarContainer" style="display: none;">
                            <div class="progress-bar-upload" role="progressbar" style="width: 0%;" id="progressBar">
                            </div>
                        </div>
                        <div id="statusMessage" class="mt-2 text-muted">Revisa y confirma la información ingresada
                            antes de cargar el PDF firmado.</div>
                    </div>
                    <hr>
                </div>

                <div class="d-flex justify-content-between mt-3" id="buttonContainer">
                    <button type="button" class="btn btn-secondary" onclick="prevStep()">Anterior</button>
                    <button type="button" class="btn btn-primary" id="nextBtn" onclick="nextStep()">Siguiente</button>
                </div>

            </form>
        </div>

        <div id="finalForm">
            <div class="success-container">

                <div class="icon"><i class="fa fa-check-circle"></i></div>
                <div class="success-message">"¡Gracias!</div>
                <div class="success-text">Tu información ha sido recibida correctamente.</div>
                <a href="/" class="success-button">Vuelve a intentarlo</a>
            </div>
        </div>
    </div>

    <script>

        window.addEventListener("load", function () {
            const loading = document.getElementById("loading");
            const content = document.getElementById("content");

            // Ocultar el loader y mostrar el contenido
            loading.style.display = "none";
            content.style.display = "block";
        });

        let currentStep = 1;
        const totalSteps = 7;

        function updateProgressBar() {
            const progressFill = document.getElementById('progressFill');
            const progress = (currentStep / totalSteps) * 100;
            progressFill.style.width = progress + '%';
        }

        function cacheFormData() {
            const fields = document.querySelectorAll('.step.active input');
            fields.forEach(field => {
                localStorage.setItem(field.name, field.value);
            });
        }

        function nextStep() {
            if (currentStep < totalSteps) {
                currentStep++;
                updateProgressBar();
                showStep(currentStep);
            } else if (currentStep === totalSteps) {
                finalizarProceso();
                showFinalMessage();
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                updateProgressBar();
                showStep(currentStep);
            }
        }

        function finalizarProceso() {
            //alert("Datos enviados: " + JSON.stringify(localStorage));
            console.log("Datos enviados de prueba.")
        }

        function showStep(step) {
            const steps = document.querySelectorAll('.step');
            steps.forEach((el, index) => {
                el.classList.toggle('active', index + 1 === step);
            });
        }

        function showFinalMessage() {
            document.getElementById('wizardContainer').style.display = 'none';
            document.getElementById('finalForm').style.display = 'block';
        }

        updateProgressBar();
        showStep(currentStep);

        /*  */

        document.getElementById("sendButton").addEventListener("click", async function (event) {
            event.preventDefault();
            try {
                const response = await fetch("/api/pdf/director", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "Accept": "application/pdf"
                    },
                    body: JSON.stringify({
                        name: "Juan Pérez",
                        address: "Calle 123",
                        municipio: "Guatemala",
                        departamento: "Guatemala",
                        telefono: "12345678",
                        email: "juan.perez@correo.com",
                        birthDate: "1980-01-01",
                        dpi: "1234567890101",
                        genero: "Masculino",
                        titulo: "Licenciado en Administración",
                        nivel: "Universitario",
                        renglon: "011",
                        escalafon: "A"
                    })
                });

                if (response.ok) {
                    const blob = await response.blob();
                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement("a");
                    a.href = url;
                    a.download = "documento.pdf";
                    document.body.appendChild(a);
                    a.click();
                    a.remove();
                } else {
                    alert("Error al enviar la solicitud: " + response.status);
                }
            } catch (error) {
                alert("Error de red: " + error.message);
            }
        });

        /* Upload */

        const dragArea = document.getElementById('dragArea');
        const fileInput = document.getElementById('fileInput');
        const filePreview = document.getElementById('filePreview');

        dragArea.addEventListener('click', () => fileInput.click());

        dragArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            dragArea.classList.add('bg-light');
        });

        dragArea.addEventListener('dragleave', () => {
            dragArea.classList.remove('bg-light');
        });

        dragArea.addEventListener('drop', (e) => {
            e.preventDefault();
            dragArea.classList.remove('bg-light');
            fileInput.files = e.dataTransfer.files;
            displayPreview(fileInput.files[0]);
        });

        fileInput.addEventListener('change', () => {
            displayPreview(fileInput.files[0]);
        });

        function displayPreview(file) {
            if (file) {
                if (file.type === "application/pdf") {
                    filePreview.innerHTML = `<i class="fa-solid fa-file-pdf file-icon"></i> <p>${file.name}</p>`;
                } else {
                    const reader = new FileReader();
                    reader.onload = function (e) {
                        filePreview.innerHTML = `<img src="${e.target.result}" class="thumbnail"> <p>${file.name}</p>`;
                    }
                    reader.readAsDataURL(file);
                }
            }
        }

        document.getElementById("btnUpload").addEventListener("click", uploadFile);

        function uploadFile(event) {
            event.preventDefault();
            const progressBar = document.getElementById('progressBar');
            const progressBarContainer = document.getElementById('progressBarContainer');
            const statusMessage = document.getElementById('statusMessage');

            if (fileInput.files.length === 0) {
                alert('Por favor selecciona un archivo.');
                return;
            }

            progressBarContainer.style.display = 'block';
            let progress = 0;
            const interval = setInterval(() => {
                progress += 10;
                progressBar.style.width = progress + '%';
                progressBar.innerText = progress + '%';
                if (progress >= 100) {
                    clearInterval(interval);
                    statusMessage.textContent = 'Archivo subido correctamente.';
                }
            }, 100);
        }

        /* Add Cancha Form */

        let formCount = 0;

        function addCanchaForm(event) {
            event.preventDefault();
            formCount++;
            const form = document.createElement('div');
            form.classList.add('card', 'p-3', 'mt-3', 'form-card-cancha');
            form.id = `step3_form-${formCount}`;
            form.dataset.index = formCount;
            form.innerHTML = `
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <h5>Cancha de Concreto ${formCount}</h5>
                    <button class="btn-close" onclick="removeForm('${form.id}')"></button>
                </div>
                <div class="mb-3 d-flex gap-3">
                    <div class="col-md-3">
                        <label for="step3_length-${formCount}" class="form-label">Largo (metros)</label>
                        <input type="number" class="form-control" id="step3_length-${formCount}" placeholder="Ej: 20">
                    </div>
                    <div class="col-md-3">
                        <label for="step3_width-${formCount}" class="form-label">Ancho (metros)</label>
                        <input type="number" class="form-control" id="step3_width-${formCount}" placeholder="Ej: 15">
                    </div>
                </div>
                <table class="table table-striped table-sm">
                    <thead>
                        <tr>
                            <th>Descripción</th>
                            <th>Sí/No</th>
                            <th>Estado</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>¿Cómo está el concreto?</td>
                            <td><select class="form-select form-select-sm"><option>Sí</option><option>No</option></select></td>
                            <td><select class="form-select form-select-sm"><option>Bueno</option><option>Regular</option><option>Malo</option></select></td>
                        </tr>
                        <tr>
                            <td>¿Tiene marcaje?</td>
                            <td><select class="form-select form-select-sm"><option>Sí</option><option>No</option></select></td>
                            <td><select class="form-select form-select-sm"><option>Bueno</option><option>Regular</option><option>Malo</option></select></td>
                        </tr>
                        <tr>
                            <td>¿Está techada?</td>
                            <td><select class="form-select form-select-sm"><option>Sí</option><option>No</option></select></td>
                            <td><select class="form-select form-select-sm"><option>Bueno</option><option>Regular</option><option>Malo</option></select></td>
                        </tr>
                        <tr>
                            <td>Tableros de baloncesto</td>
                            <td><select class="form-select form-select-sm"><option>Sí</option><option>No</option></select></td>
                            <td><select class="form-select form-select-sm"><option>Bueno</option><option>Regular</option><option>Malo</option></select></td>
                        </tr>
                        <tr>
                            <td>Porterías de fútbol</td>
                            <td><select class="form-select form-select-sm"><option>Sí</option><option>No</option></select></td>
                            <td><select class="form-select form-select-sm"><option>Bueno</option><option>Regular</option><option>Malo</option></select></td>
                        </tr>
                        <tr>
                            <td>Postes de voleibol</td>
                            <td><select class="form-select form-select-sm"><option>Sí</option><option>No</option></select></td>
                            <td><select class="form-select form-select-sm"><option>Bueno</option><option>Regular</option><option>Malo</option></select></td>
                        </tr>
                    </tbody>
                </table>
            `;
            document.getElementById('forms-list').appendChild(form);
            updateFormNumbers();
        }


        function removeForm(id) {
            document.getElementById(id).remove();
            updateFormNumbers();
        }

        function updateFormNumbers() {
            const forms = document.querySelectorAll('.form-card-cancha');
            forms.forEach((form, index) => {
                const title = form.querySelector('h5');
                title.textContent = `Cancha de Concreto ${index + 1}`;
                form.dataset.index = index + 1;
            });
            formCount = forms.length;
        }

        function showStep3Data() {
            const data = {};

            // Obtener los datos principales del formulario
            const terrenoRadioYes = document.getElementById('step3_terrenoYes').checked;
            const terrenoRadioNo = document.getElementById('step3_terrenoNo').checked;
            const terreno = terrenoRadioYes ? "Sí" : (terrenoRadioNo ? "No" : "No especificado");

            const length = document.getElementById('step3_length').value;
            const width = document.getElementById('step3_width').value;

            data.terreno = terreno;
            data.medidas = { largo: length, ancho: width };

            // Recorrer las cajas dinámicas de canchas
            data.canchas = [];
            const forms = document.querySelectorAll('.form-card-cancha');
            forms.forEach((form, index) => {
                const canchaData = {};
                canchaData.nombre = `Cancha de Concreto ${index + 1}`;

                // Obtener largo y ancho
                canchaData.largo = form.querySelector(`#step3_length-${index + 1}`).value;
                canchaData.ancho = form.querySelector(`#step3_width-${index + 1}`).value;

                // Obtener información adicional de la tabla dentro de cada formulario
                canchaData.detalles = [];
                const rows = form.querySelectorAll('tbody tr');
                rows.forEach((row) => {
                    const descripcion = row.cells[0].innerText;
                    const respuesta = row.cells[1].querySelector('select').value;
                    const estado = row.cells[2].querySelector('select').value;

                    canchaData.detalles.push({
                        descripcion: descripcion,
                        respuesta: respuesta,
                        estado: estado
                    });
                });

                data.canchas.push(canchaData);
            });

            // Mostrar los datos en formato JSON
            console.log("Datos de Paso 3:", data);
            //alert(JSON.stringify(data, null, 2));
        }


        /* Add Futbool  */

        let footballFieldCount = 0;

        function addFootballFieldForm(event) {
            event.preventDefault();
            footballFieldCount++;
            const form = document.createElement('div');
            form.classList.add('card', 'p-3', 'mt-3', 'football-field-form');
            form.id = `footballField-${footballFieldCount}`;
            form.dataset.index = footballFieldCount;
            form.innerHTML = `
            <div class="d-flex justify-content-between align-items-center mb-2">
                <h5>Campo de Fútbol #${footballFieldCount}</h5>
                <button class="btn-close" onclick="removeFootballFieldForm('${form.id}')"></button>
            </div>
            <div class="mb-3 d-flex gap-3">
                <div class="col-md-3">
                    <label for="length-${footballFieldCount}" class="form-label">Longitud (metros)</label>
                    <input type="number" class="form-control" id="length-${footballFieldCount}" placeholder="Longitud">
                </div>
                <div class="col-md-3">
                    <label for="width-${footballFieldCount}" class="form-label">Ancho (metros)</label>
                    <input type="number" class="form-control" id="width-${footballFieldCount}" placeholder="Ancho">
                </div>
            </div>
            <table class="table table-striped table-sm">
                <thead>
                    <tr>
                        <th>Descripción</th>
                        <th>Sí/No</th>
                        <th>Condición</th>
                    </tr>
                </thead>
                <tbody>
                <tr>
                    <td>¿Cómo está el suelo?</td>
                    <td><select class="form-select form-select-sm"><option value="si">Sí</option><option value="no">No</option></select></td>
                    <td><select class="form-select form-select-sm"><option value="bueno">Bueno</option><option value="regular">Regular</option><option value="malo">Malo</option></select></td>
                </tr>
                <tr>
                    <td>¿Cómo están las porterías?</td>
                    <td><select class="form-select form-select-sm"><option value="si">Sí</option><option value="no">No</option></select></td>
                    <td><select class="form-select form-select-sm"><option value="bueno">Bueno</option><option value="regular">Regular</option><option value="malo">Malo</option></select></td>
                </tr>
                <tr>
                    <td>¿El campo está marcado?</td>
                    <td><select class="form-select form-select-sm"><option value="si">Sí</option><option value="no">No</option></select></td>
                    <td><select class="form-select form-select-sm"><option value="bueno">Bueno</option><option value="regular">Regular</option><option value="malo">Malo</option></select></td>
                </tr>
                <tr>
                    <td>¿El campo tiene camerinos?</td>
                    <td><select class="form-select form-select-sm"><option value="si">Sí</option><option value="no">No</option></select></td>
                    <td><select class="form-select form-select-sm"><option value="bueno">Bueno</option><option value="regular">Regular</option><option value="malo">Malo</option></select></td>
                </tr>
                <tr>
                    <td>¿El campo tiene grama?</td>
                    <td><select class="form-select form-select-sm"><option value="si">Sí</option><option value="no">No</option></select></td>
                    <td><select class="form-select form-select-sm"><option value="bueno">Bueno</option><option value="regular">Regular</option><option value="malo">Malo</option></select></td>
                </tr>
            </tbody>
            </table>
        `;
            document.getElementById('footballFieldsList').appendChild(form);
            updateFootballFieldNumbers();
        }

        function removeFootballFieldForm(id) {
            document.getElementById(id).remove();
            updateFootballFieldNumbers();
        }

        function updateFootballFieldNumbers() {
            const forms = document.querySelectorAll('.football-field-form');
            forms.forEach((form, index) => {
                const title = form.querySelector('h5');
                title.textContent = `Campo de Fútbol ${index + 1}`;
                form.dataset.index = index + 1;
            });
            footballFieldCount = forms.length;
        }


        // Función para obtener datos de los campos dinámicos
        function getFootballFieldData() {
            const fieldData = [];
            document.querySelectorAll('.football-field-form').forEach((form) => {
                const fieldIndex = form.dataset.index;
                const length = document.getElementById(`length-${fieldIndex}`).value;
                const width = document.getElementById(`width-${fieldIndex}`).value;
                const rows = Array.from(form.querySelectorAll('tbody tr')).map((row) => {
                    const description = row.cells[0].innerText;
                    const yesNo = row.cells[1].querySelector('select').value;
                    const condition = row.cells[2].querySelector('select').value;
                    return { description, yesNo, condition };
                });
                fieldData.push({
                    id: fieldIndex,
                    length,
                    width,
                    rows
                });
            });
            console.log(fieldData);
        }

        /* Otras areas deportivas  */

        function obtenerDatos() {
            const filas = document.querySelectorAll('tbody tr');
            const resultado = [];
            filas.forEach((fila) => {
                const descripcion = fila.cells[0].innerText;
                const siNo = fila.querySelector('.otras-areas-select').value === 'Si' ? 'S' : 'N';
                const estado = fila.querySelector('.otras-areas-condition').value;
                const largo = parseFloat(fila.querySelector('.otras-areas-length').value) || 0;
                const ancho = parseFloat(fila.querySelector('.otras-areas-width').value) || 0;
                resultado.push({ descripcion, siNo, estado, largo, ancho });
            });
            console.log(resultado);
            //alert(JSON.stringify(resultado, null, 2));
        }

        function toggleFields(selectElement) {
            const row = selectElement.closest('tr');
            const disabled = selectElement.value === 'No';
            row.querySelector('.otras-areas-condition').disabled = disabled;
            row.querySelector('.otras-areas-length').disabled = disabled;
            row.querySelector('.otras-areas-width').disabled = disabled;
        }

        /* Docente de Educacion  */

        function capturarDatosDocente(event) {
            event.preventDefault();
            const formDocente = document.getElementById('formDocente');
            const formData = new FormData();
            const inputs = formDocente.querySelectorAll('input, select');
            inputs.forEach(input => formData.append(input.name, input.value));
            for (const [key, value] of formData.entries()) {
                console.log(`${key}: ${value}`);
            }
        }

        /*  Items */

        async function loadItems(combos) {
            try {
                const responses = await Promise.all(combos.map(combo => fetch(`/api/items/${combo.type}`)));
                const itemsList = await Promise.all(responses.map(response => response.json()));
                itemsList.forEach((items, index) => {
                    const combo = document.getElementById(combos[index].id);
                    items.forEach(item => {
                        const option = document.createElement('option');
                        option.value = item.id;
                        option.textContent = `${item.name}`;
                        combo.appendChild(option);
                    });
                });
            } catch (error) {
                console.error('Error cargando los elementos:', error);
            }
        }

        const combos = [
            { type: 'departamentos', name: 'Departamento', id: 'step1_departamento' },
            { type: 'municipios', name: 'Ciudad', id: 'step1_municipio' },
            { type: 'departamentos', name: 'Departamento', id: 'step2_departamento' },
            { type: 'municipios', name: 'Ciudad', id: 'step2_municipio' },
            { type: 'departamentos', name: 'Departamento', id: 'step6_department' },
            { type: 'municipios', name: 'Ciudad', id: 'step6_municipality' }
        ];

        window.onload = () => loadItems(combos);

        /* Obtener Datos Director  */

        function obtenerDatosDirector() {
            const step1 = document.getElementById('step1');
            const inputs = step1.querySelectorAll('input, select');
            const datos = {};
            inputs.forEach(input => {
                datos[input.name] = input.value;
            });
            console.log(datos);
            //alert(JSON.stringify(datos, null, 2));
        }


        /* Director Decente  */

        function getDirectorData() {
            // Definir los campos en un objeto
            const fields = [
                "name", "address", "municipality", "department",
                "phone", "email", "birthdate", "dpi",
                "gender", "title", "academic_level", "budget", "scale"
            ];

            // Crear el objeto para almacenar los datos del formulario
            const directorData = {};

            // Recorrer los campos para obtener sus valores
            fields.forEach(field => {
                const element = document.getElementById(`step6_${field}`);
                if (element) {
                    directorData[field] = element.value;
                }
            });

            // Mostrar los datos en la consola
            console.log("Datos del Docente de Educación Física:", directorData);

            // Formatear los datos para mostrarlos en un cuadro de alerta
            const formattedData = Object.entries(directorData)
                .map(([key, value]) => `${key.replace('_', ' ')}: ${value}`)
                .join('\n');

            consolelog(formattedData)    
            //alert(`Datos del Docente de Educación Física:\n\n${formattedData}`);
        }

        /*  Step2 */
        function getStep2Values() {
            const elements = document.querySelectorAll('#step2 input, #step2 select');
            let values = '';
            elements.forEach(el => {
                values += el.id + ': ' + (el.type === 'checkbox' ? (el.checked ? 'Sí' : 'No') : el.value) + '\n';
            });
            console.log(values);
        }


    </script>

</body>

</html>